directive @specifiedBy(url: String!) on SCALAR
type Common {
  id: ID!
  createdAt: Date!
  updatedAt: Date!
  name: String!
  balance: Int!
  raised: Int!
  metadata: CommonMetadata!
  members: [CommonMember]
}

enum CommonContributionType {
  oneTime
  monthly
}

type CommonMember {
  userId: ID!
  joinedAt: Date
}

type CommonMetadata {
  byline: String!
  description: String!
  founderId: String!
  minFeeToJoin: Int!
  contributionType: CommonContributionType!
}

scalar Date

type Event {
  id: ID!
  type: EventType!
  createdAt: Date!
  updatedAt: Date!
  objectId: ID
  userId: ID
}

enum EventType {
  commonCreated
  commonCreationFailed
  commonWhitelisted
  commonMemberAdded
  commonMemberRemoved
  commonUpdated
  requestToJoinCreated
  requestToJoinAccepted
  requestToJoinRejected
  requestToJoinExecuted
  fundingRequestCreated
  fundingRequestRejected
  fundingRequestExecuted
  fundingRequestAccepted
  fundingRequestAcceptedInsufficientFunds
  voteCreated
  paymentCreated
  paymentConfirmed
  paymentFailed
  paymentPaid
  payoutCreated
  payoutApproved
  payoutExecuted
  payoutVoided
  payoutCompleted
  payoutFailed
  cardCreated
  discussionCreated
  messageCreated
  subscriptionCreated
  subscriptionPaymentCreated
  subscriptionPaymentFailed
  subscriptionPaymentConfirmed
  subscriptionPaymentStuck
  subscriptionCanceledByUser
  subscriptionCanceledByPaymentFailure
  membershipRevoked
}

type Query {
  today: Statistics
  event(eventId: ID!): Event
  events(last: Int!, after: Int): [Event]
  common(commonId: ID!): Common
  commons(last: Int = 10, after: Int = 0): [Common]
}

type Statistics {
  newCommons: Int
  newJoinRequests: Int
  newFundingRequests: Int
  newDiscussions: Int
  newDiscussionMessages: Int
}


